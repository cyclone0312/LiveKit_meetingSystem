# è§†é¢‘ä¼šè®®é¡¹ç›®æ¶æ„æ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
meeting/
â”œâ”€â”€ src/                          # C++ æºä»£ç 
â”‚   â”œâ”€â”€ main.cpp                  # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ meetingcontroller.h/cpp   # ä¼šè®®æ§åˆ¶å™¨ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
â”‚   â”œâ”€â”€ livekitmanager.h/cpp      # LiveKit è¿æ¥ç®¡ç†å™¨ï¼ˆç½‘ç»œå±‚ï¼‰
â”‚   â”œâ”€â”€ mediacapture.h/cpp        # åª’ä½“é‡‡é›†å™¨ï¼ˆç¡¬ä»¶å±‚ï¼‰
â”‚   â”œâ”€â”€ participantmodel.h/cpp    # å‚ä¼šè€…æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ chatmodel.h/cpp           # èŠå¤©æ¶ˆæ¯æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ resources/qml/                # QML ç•Œé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ main.qml                  # ä¸»çª—å£å’Œé¡µé¢å¯¼èˆª
â”‚   â”œâ”€â”€ components/               # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VideoGrid.qml         # è§†é¢‘ç½‘æ ¼å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ VideoItem.qml         # å•ä¸ªè§†é¢‘é¡¹
â”‚   â”‚   â”œâ”€â”€ ControlBar.qml        # åº•éƒ¨æ§åˆ¶æ 
â”‚   â”‚   â”œâ”€â”€ TopBar.qml            # é¡¶éƒ¨ä¿¡æ¯æ 
â”‚   â”‚   â”œâ”€â”€ ChatPanel.qml         # èŠå¤©é¢æ¿
â”‚   â”‚   â”œâ”€â”€ ParticipantPanel.qml  # å‚ä¼šè€…åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ MeetingButton.qml     # ä¼šè®®æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ pages/                    # é¡µé¢
â”‚   â””â”€â”€ dialogs/                  # å¯¹è¯æ¡†
â”‚
â””â”€â”€ livekit-sdk-windows-x64/      # LiveKit C++ SDK
```

---

## ğŸ—ï¸ æ ¸å¿ƒç±»åŠå…¶èŒè´£

### 1. MeetingControllerï¼ˆä¼šè®®æ§åˆ¶å™¨ï¼‰

**ä½ç½®**: `src/meetingcontroller.h/cpp`  
**è§’è‰²**: **ä¸šåŠ¡é€»è¾‘å±‚** - æ•´ä¸ªåº”ç”¨çš„"å¤§è„‘"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MeetingController                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èŒè´£ï¼š                                                       â”‚
â”‚  â€¢ ç®¡ç†ä¼šè®®çŠ¶æ€ï¼ˆåˆ›å»ºã€åŠ å…¥ã€ç¦»å¼€ä¼šè®®ï¼‰                          â”‚
â”‚  â€¢ ç®¡ç†åª’ä½“çŠ¶æ€ï¼ˆéº¦å…‹é£ã€æ‘„åƒå¤´å¼€å…³ï¼‰                            â”‚
â”‚  â€¢ ç®¡ç†ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨æˆ·åã€ä¼šè®®IDã€æ—¶é•¿ï¼‰                          â”‚
â”‚  â€¢ åè°ƒ LiveKitManager è¿›è¡Œç½‘ç»œæ“ä½œ                            â”‚
â”‚  â€¢ å‘ QML å±‚æš´éœ²æ‰€æœ‰å¯äº¤äº’çš„å±æ€§å’Œæ–¹æ³•                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦å±æ€§ï¼ˆQ_PROPERTYï¼‰ï¼š                                       â”‚
â”‚  â€¢ isMicOn / isCameraOn    - åª’ä½“å¼€å…³çŠ¶æ€                      â”‚
â”‚  â€¢ isInMeeting             - æ˜¯å¦åœ¨ä¼šè®®ä¸­                       â”‚
â”‚  â€¢ meetingId / userName    - ä¼šè®®å’Œç”¨æˆ·ä¿¡æ¯                     â”‚
â”‚  â€¢ isConnecting/isConnected- è¿æ¥çŠ¶æ€                          â”‚
â”‚  â€¢ liveKitManager          - æš´éœ²ç»™ QML çš„ç½‘ç»œç®¡ç†å™¨             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦æ–¹æ³•ï¼ˆpublic slotsï¼‰ï¼š                                     â”‚
â”‚  â€¢ createMeeting()         - åˆ›å»ºæ–°ä¼šè®®                        â”‚
â”‚  â€¢ joinMeeting()           - åŠ å…¥å·²æœ‰ä¼šè®®                       â”‚
â”‚  â€¢ leaveMeeting()          - ç¦»å¼€ä¼šè®®                          â”‚
â”‚  â€¢ toggleMic/Camera()      - åˆ‡æ¢éº¦å…‹é£/æ‘„åƒå¤´                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. LiveKitManagerï¼ˆLiveKit ç®¡ç†å™¨ï¼‰

**ä½ç½®**: `src/livekitmanager.h/cpp`  
**è§’è‰²**: **ç½‘ç»œé€šä¿¡å±‚** - è´Ÿè´£ä¸ LiveKit æœåŠ¡å™¨çš„æ‰€æœ‰äº¤äº’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LiveKitManager                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èŒè´£ï¼š                                                       â”‚
â”‚  â€¢ å‘ Token Server è¯·æ±‚è®¤è¯ Token                             â”‚
â”‚  â€¢ ä½¿ç”¨ LiveKit SDK è¿æ¥/æ–­å¼€æˆ¿é—´                              â”‚
â”‚  â€¢ å‘å¸ƒ/å–æ¶ˆå‘å¸ƒéŸ³è§†é¢‘è½¨é“                                      â”‚
â”‚  â€¢ æ¥æ”¶å¹¶è½¬å‘ SDK å›è°ƒäº‹ä»¶ï¼ˆé€šè¿‡ LiveKitRoomDelegateï¼‰           â”‚
â”‚  â€¢ ç®¡ç† MediaCapture å®ä¾‹                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å…³é”®ç»„ä»¶ï¼š                                                    â”‚
â”‚  â€¢ m_room (livekit::Room)         - LiveKit SDK æˆ¿é—´å¯¹è±¡       â”‚
â”‚  â€¢ m_delegate (LiveKitRoomDelegate)- äº‹ä»¶å›è°ƒå§”æ‰˜               â”‚
â”‚  â€¢ m_mediaCapture (MediaCapture)  - åª’ä½“é‡‡é›†å™¨                  â”‚
â”‚  â€¢ m_networkManager               - Qt ç½‘ç»œè¯·æ±‚ç®¡ç†             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦æ–¹æ³•ï¼š                                                    â”‚
â”‚  â€¢ joinRoom(roomName, userName)   - è¯·æ±‚ Token å¹¶è¿æ¥æˆ¿é—´       â”‚
â”‚  â€¢ leaveRoom()                    - æ–­å¼€è¿æ¥å¹¶æ¸…ç†èµ„æº           â”‚
â”‚  â€¢ publishCamera/Microphone()     - å‘å¸ƒéŸ³è§†é¢‘è½¨é“              â”‚
â”‚  â€¢ unpublishCamera/Microphone()   - å–æ¶ˆå‘å¸ƒï¼ˆä½¿ç”¨ muteï¼‰        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¿æ¥æµç¨‹ï¼š                                                    â”‚
â”‚  joinRoom() â†’ requestToken() â†’ [HTTPè¯·æ±‚] â†’ connectToRoom()   â”‚
â”‚            â†’ [åå°çº¿ç¨‹] m_room->Connect() â†’ å‘å‡º connected ä¿¡å· â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### LiveKitRoomDelegateï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LiveKitRoomDelegate                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»§æ‰¿è‡ªï¼šlivekit::RoomDelegate                                â”‚
â”‚ èŒè´£ï¼šæ¥æ”¶ LiveKit SDK çš„å›è°ƒï¼Œè½¬å‘ç»™ Qt ä¿¡å·æ§½ç³»ç»Ÿ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å›è°ƒäº‹ä»¶ï¼š                                                    â”‚
â”‚  â€¢ onParticipantConnected/Disconnected - å‚ä¼šè€…è¿›å‡º            â”‚
â”‚  â€¢ onTrackSubscribed/Unsubscribed      - è½¨é“è®¢é˜…äº‹ä»¶          â”‚
â”‚  â€¢ onTrackMuted/Unmuted                - è½¨é“é™éŸ³äº‹ä»¶          â”‚
â”‚  â€¢ onDisconnected/Reconnecting         - è¿æ¥çŠ¶æ€å˜åŒ–          â”‚
â”‚  â€¢ onUserPacketReceived                - æ”¶åˆ°æ•°æ®æ¶ˆæ¯          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. MediaCaptureï¼ˆåª’ä½“é‡‡é›†å™¨ï¼‰

**ä½ç½®**: `src/mediacapture.h/cpp`  
**è§’è‰²**: **ç¡¬ä»¶æŠ½è±¡å±‚** - ç®¡ç†æ‘„åƒå¤´å’Œéº¦å…‹é£ç¡¬ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MediaCapture                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èŒè´£ï¼š                                                       â”‚
â”‚  â€¢ æšä¸¾å’Œé€‰æ‹©æ‘„åƒå¤´/éº¦å…‹é£è®¾å¤‡                                  â”‚
â”‚  â€¢ å¯åŠ¨/åœæ­¢æ‘„åƒå¤´å’Œéº¦å…‹é£é‡‡é›†                                  â”‚
â”‚  â€¢ å°† Qt è§†é¢‘å¸§è½¬æ¢ä¸º LiveKit å¸§æ ¼å¼                            â”‚
â”‚  â€¢ å°†è§†é¢‘å¸§åŒæ—¶å‘é€åˆ° QML é¢„è§ˆ å’Œ LiveKit SDK                    â”‚
â”‚  â€¢ åˆ›å»ºå’Œç®¡ç† LiveKit è½¨é“ï¼ˆLocalVideoTrack/LocalAudioTrackï¼‰   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å…³é”®ç»„ä»¶ï¼š                                                    â”‚
â”‚  â€¢ m_camera (QCamera)                - Qt æ‘„åƒå¤´å¯¹è±¡           â”‚
â”‚  â€¢ m_captureSession                  - Qt åª’ä½“ä¼šè¯             â”‚
â”‚  â€¢ m_audioSource (QAudioSource)      - Qt éŸ³é¢‘æº               â”‚
â”‚  â€¢ m_lkVideoSource/m_lkAudioSource   - LiveKit æ•°æ®æº          â”‚
â”‚  â€¢ m_lkVideoTrack/m_lkAudioTrack     - LiveKit è½¨é“            â”‚
â”‚  â€¢ m_videoHandler (VideoFrameHandler)- è§†é¢‘å¸§å¤„ç†å™¨             â”‚
â”‚  â€¢ m_audioHandler (AudioFrameHandler)- éŸ³é¢‘å¸§å¤„ç†å™¨             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è§†é¢‘æµå‘ï¼š                                                    â”‚
â”‚  QCamera â†’ QMediaCaptureSession â†’ m_internalVideoSink        â”‚
â”‚         â†’ onVideoFrameReceived() â†’ 1. m_externalVideoSink (QMLé¢„è§ˆ) â”‚
â”‚                                   â†’ 2. VideoFrameHandler â†’ LiveKit â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦æ–¹æ³•ï¼š                                                    â”‚
â”‚  â€¢ startCamera/stopCamera()          - æ§åˆ¶æ‘„åƒå¤´              â”‚
â”‚  â€¢ startMicrophone/stopMicrophone()  - æ§åˆ¶éº¦å…‹é£              â”‚
â”‚  â€¢ bindVideoSink(sink) [Q_INVOKABLE] - QML ç»‘å®šè§†é¢‘è¾“å‡º        â”‚
â”‚  â€¢ recreateVideoTrack/AudioTrack()   - é‡å»ºè½¨é“ï¼ˆç¦»å¼€æˆ¿é—´åï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### VideoFrameHandler / AudioFrameHandlerï¼ˆå¸§å¤„ç†å™¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VideoFrameHandler / AudioFrameHandler          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èŒè´£ï¼šå°† Qt æ ¼å¼çš„åª’ä½“å¸§è½¬æ¢ä¸º LiveKit SDK æ ¼å¼å¹¶å‘é€           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VideoFrameHandler:                                          â”‚
â”‚   QVideoFrame â†’ QImage(ARGB32) â†’ LKVideoFrame â†’ VideoSource â”‚
â”‚                                                             â”‚
â”‚ AudioFrameHandler (ç»§æ‰¿ QIODevice):                          â”‚
â”‚   PCMéŸ³é¢‘æ•°æ® â†’ AudioFrame â†’ AudioSource                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. ParticipantModelï¼ˆå‚ä¼šè€…æ¨¡å‹ï¼‰

**ä½ç½®**: `src/participantmodel.h/cpp`  
**è§’è‰²**: **æ•°æ®æ¨¡å‹** - ç®¡ç†å‚ä¼šè€…åˆ—è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ParticipantModel                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»§æ‰¿è‡ªï¼šQAbstractListModel                                   â”‚
â”‚ èŒè´£ï¼šä¸º QML ListView/GridView æä¾›å‚ä¼šè€…æ•°æ®                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®ç»“æ„ (Participant):                                      â”‚
â”‚  â€¢ id, name, avatarUrl                                      â”‚
â”‚  â€¢ isMicOn, isCameraOn, isScreenSharing                     â”‚
â”‚  â€¢ isHost, isHandRaised, isLocal                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦æ–¹æ³•ï¼š                                                    â”‚
â”‚  â€¢ addParticipant()      - æ·»åŠ å‚ä¼šè€…                         â”‚
â”‚  â€¢ removeParticipant()   - ç§»é™¤å‚ä¼šè€…                         â”‚
â”‚  â€¢ updateParticipant()   - æ›´æ–°çŠ¶æ€                           â”‚
â”‚  â€¢ addDemoParticipants() - æ·»åŠ æ¨¡æ‹Ÿæ•°æ®                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. ChatModelï¼ˆèŠå¤©æ¨¡å‹ï¼‰

**ä½ç½®**: `src/chatmodel.h/cpp`  
**è§’è‰²**: **æ•°æ®æ¨¡å‹** - ç®¡ç†èŠå¤©æ¶ˆæ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ChatModel                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»§æ‰¿è‡ªï¼šQAbstractListModel                                   â”‚
â”‚ èŒè´£ï¼šä¸º QML ListView æä¾›èŠå¤©æ¶ˆæ¯æ•°æ®                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®ç»“æ„ (ChatMessage):                                      â”‚
â”‚  â€¢ id, senderId, senderName, content                        â”‚
â”‚  â€¢ timestamp, isSystem, isSelf                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸»è¦æ–¹æ³•ï¼š                                                    â”‚
â”‚  â€¢ sendMessage()         - å‘é€æ¶ˆæ¯                           â”‚
â”‚  â€¢ addMessage()          - æ·»åŠ æ¶ˆæ¯                           â”‚
â”‚  â€¢ addSystemMessage()    - æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— ç±»ä¹‹é—´çš„è°ƒç”¨å…³ç³»

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    main.qml     â”‚
                          â”‚   (QML ç•Œé¢)     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ é€šè¿‡ä¸Šä¸‹æ–‡å±æ€§è®¿é—®
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼              â–¼              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ParticipantModelâ”‚ â”‚  ChatModel   â”‚  â”‚ mediaCaptureâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â”‚ å±äº
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚                   â”‚
                    â–¼                               â–¼                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
         â”‚              MeetingController                   â”‚           â”‚
         â”‚  (ä¼šè®®ä¸šåŠ¡é€»è¾‘ï¼šåˆ›å»º/åŠ å…¥/ç¦»å¼€ä¼šè®®ï¼Œåª’ä½“å¼€å…³æ§åˆ¶)    â”‚           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                               â”‚ æ‹¥æœ‰å¹¶è°ƒç”¨                              â”‚
                               â–¼                                        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
         â”‚               LiveKitManager                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚  (ç½‘ç»œè¿æ¥ï¼šTokenè¯·æ±‚ï¼Œæˆ¿é—´è¿æ¥ï¼Œè½¨é“å‘å¸ƒ)           â”‚  æš´éœ²ç»™QML
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ æ‹¥æœ‰å¹¶è°ƒç”¨
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚livekit::Room â”‚  â”‚MediaCapture  â”‚  â”‚LiveKitRoomDelegateâ”‚
    â”‚ (SDKæˆ¿é—´å¯¹è±¡) â”‚  â”‚(æ‘„åƒå¤´/éº¦å…‹é£)â”‚  â”‚  (äº‹ä»¶å›è°ƒå§”æ‰˜)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ æ‹¥æœ‰
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ QCamera  â”‚  â”‚LocalVideo  â”‚  â”‚LocalAudio    â”‚
        â”‚          â”‚  â”‚Track       â”‚  â”‚Track         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å…³é”®æµç¨‹å›¾

### æµç¨‹ 1ï¼šåˆ›å»º/åŠ å…¥ä¼šè®®

```
ç”¨æˆ·ç‚¹å‡»"å¿«é€Ÿä¼šè®®"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QML: meetingController.createMeeting(title)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MeetingController::createMeeting()                              â”‚
â”‚   1. ç”Ÿæˆéšæœºä¼šè®®ID                                              â”‚
â”‚   2. è®¾ç½®ä¼šè®®æ ‡é¢˜                                                â”‚
â”‚   3. è°ƒç”¨ m_liveKitManager->joinRoom(meetingId, userName)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LiveKitManager::joinRoom()                                      â”‚
â”‚   1. è®¾ç½® m_isConnecting = true                                 â”‚
â”‚   2. è°ƒç”¨ requestToken()                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ [HTTP POST è¯·æ±‚]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Token Server (http://æœåŠ¡å™¨:3000/getToken)                      â”‚
â”‚   è¿”å› JWT Token                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LiveKitManager::connectToRoom()                                 â”‚
â”‚   1. åœ¨åå°çº¿ç¨‹æ‰§è¡Œ m_room->Connect() [é¿å…é˜»å¡UI]               â”‚
â”‚   2. è¿æ¥æˆåŠŸåå›åˆ°ä¸»çº¿ç¨‹                                        â”‚
â”‚   3. å‘å‡º connected() ä¿¡å·                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MeetingController::onLiveKitConnected()                         â”‚
â”‚   1. setInMeeting(true)                                         â”‚
â”‚   2. å‘å‡º meetingCreated/meetingJoined ä¿¡å·                      â”‚
â”‚   3. QML æ˜¾ç¤ºä¼šè®®ç•Œé¢                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµç¨‹ 2ï¼šå¼€å¯æ‘„åƒå¤´

```
ç”¨æˆ·ç‚¹å‡»"å¼€å¯è§†é¢‘"æŒ‰é’®
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QML: meetingController.toggleCamera()                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MeetingController::setCameraOn(true)                            â”‚
â”‚   1. è®¾ç½® m_isCameraOn = true                                   â”‚
â”‚   2. è°ƒç”¨ m_liveKitManager->publishCamera()                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LiveKitManager::publishCamera()                                 â”‚
â”‚   1. å¦‚æœé¦–æ¬¡å‘å¸ƒï¼š                                              â”‚
â”‚      a. è°ƒç”¨ m_mediaCapture->startCamera()                      â”‚
â”‚      b. å»¶æ—¶åè°ƒç”¨ doPublishCameraTrack()                        â”‚
â”‚   2. å¦‚æœå·²å‘å¸ƒè¿‡ï¼š                                              â”‚
â”‚      a. å¯åŠ¨æœ¬åœ°æ‘„åƒå¤´                                           â”‚
â”‚      b. è°ƒç”¨ m_videoPublication->setMuted(false)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MediaCapture::startCamera()                                     â”‚
â”‚   1. åˆ›å»º QCamera å¯¹è±¡                                          â”‚
â”‚   2. è®¾ç½®åˆ° QMediaCaptureSession                                â”‚
â”‚   3. è¿æ¥è§†é¢‘å¸§ä¿¡å·                                              â”‚
â”‚   4. å¯åŠ¨æ‘„åƒå¤´                                                  â”‚
â”‚   5. å¯ç”¨ VideoFrameHandler                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ [æ‘„åƒå¤´å¼€å§‹é‡‡é›†]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§†é¢‘å¸§æµå‘ï¼š                                                     â”‚
â”‚                                                                  â”‚
â”‚  QCamera â”€â”€â–º QMediaCaptureSession â”€â”€â–º m_internalVideoSink       â”‚
â”‚                                              â”‚                   â”‚
â”‚                                              â–¼                   â”‚
â”‚                                    onVideoFrameReceived()        â”‚
â”‚                                              â”‚                   â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                          â–¼                                 â–¼    â”‚
â”‚              m_externalVideoSink              VideoFrameHandler â”‚
â”‚              (QML VideoOutput)                      â”‚           â”‚
â”‚                     â”‚                               â–¼           â”‚
â”‚                     â–¼                       livekit::VideoSourceâ”‚
â”‚               æœ¬åœ°è§†é¢‘é¢„è§ˆ                          â”‚           â”‚
â”‚                                                     â–¼           â”‚
â”‚                                            å‘å¸ƒåˆ° LiveKit æˆ¿é—´   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµç¨‹ 3ï¼šç¦»å¼€ä¼šè®®

```
ç”¨æˆ·ç‚¹å‡»"ç¦»å¼€ä¼šè®®"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MeetingController::leaveMeeting()                               â”‚
â”‚   1. é‡ç½® m_isCameraOn = false, m_isMicOn = false               â”‚
â”‚   2. è°ƒç”¨ m_liveKitManager->leaveRoom()                         â”‚
â”‚   3. setInMeeting(false)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LiveKitManager::leaveRoom()                                     â”‚
â”‚   1. m_mediaCapture->stopCamera/Microphone()                    â”‚
â”‚   2. æ¸…é™¤å‘å¸ƒçŠ¶æ€ (m_videoPublication.reset())                   â”‚
â”‚   3. m_room->setDelegate(nullptr) [é˜²æ­¢å›è°ƒå´©æºƒ]                 â”‚
â”‚   4. m_room.reset() [é”€æ¯æ—§ Room]                                â”‚
â”‚   5. QThread::msleep(100) [ç­‰å¾… SDK æ¸…ç†]                        â”‚
â”‚   6. åˆ›å»ºæ–°çš„ m_room                                             â”‚
â”‚   7. m_mediaCapture->recreateVideoTrack/AudioTrack()            â”‚
â”‚   8. å‘å‡º disconnected() ä¿¡å·                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ QML ç»„ä»¶è¯´æ˜

| ç»„ä»¶                 | æ–‡ä»¶                   | åŠŸèƒ½                                          |
| -------------------- | ---------------------- | --------------------------------------------- |
| **VideoGrid**        | `VideoGrid.qml`        | è§†é¢‘ç½‘æ ¼å¸ƒå±€ï¼Œä½¿ç”¨ GridView æ˜¾ç¤ºæ‰€æœ‰å‚ä¼šè€…    |
| **VideoItem**        | `VideoItem.qml`        | å•ä¸ªè§†é¢‘é¡¹ï¼Œæ˜¾ç¤ºå¤´åƒ/è§†é¢‘ç”»é¢ã€åç§°ã€çŠ¶æ€å›¾æ ‡ |
| **ControlBar**       | `ControlBar.qml`       | åº•éƒ¨æ§åˆ¶æ ï¼ŒåŒ…å«éº¦å…‹é£ã€æ‘„åƒå¤´ã€å…±äº«ç­‰æŒ‰é’®    |
| **TopBar**           | `TopBar.qml`           | é¡¶éƒ¨ä¿¡æ¯æ ï¼Œæ˜¾ç¤ºä¼šè®®æ ‡é¢˜ã€ä¼šè®®å·ã€æ—¶é•¿        |
| **ChatPanel**        | `ChatPanel.qml`        | èŠå¤©é¢æ¿ï¼Œæ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨å’Œè¾“å…¥æ¡†                |
| **ParticipantPanel** | `ParticipantPanel.qml` | å‚ä¼šè€…åˆ—è¡¨é¢æ¿                                |

---

## âš ï¸ å…³é”®æŠ€æœ¯ç‚¹

### 1. C++ ä¸ QML äº¤äº’

```cpp
// æ–¹å¼1ï¼šä¸Šä¸‹æ–‡å±æ€§ï¼ˆå•ä¾‹å¯¹è±¡ï¼‰
engine.rootContext()->setContextProperty("meetingController", &controller);

// æ–¹å¼2ï¼šæ³¨å†Œç±»å‹ï¼ˆå¯åœ¨QMLä¸­åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼‰
qmlRegisterType<MeetingController>("Meeting", 1, 0, "MeetingController");

// æ–¹å¼3ï¼šQ_PROPERTY æš´éœ²å±æ€§
Q_PROPERTY(bool isCameraOn READ isCameraOn NOTIFY cameraOnChanged)

// æ–¹å¼4ï¼šQ_INVOKABLE æš´éœ²æ–¹æ³•
Q_INVOKABLE void bindVideoSink(QVideoSink *sink);
```

### 2. è§†é¢‘æ˜¾ç¤ºåŸç†

```
QML VideoOutput éœ€è¦ä¸€ä¸ª QVideoSink æ¥æ¥æ”¶è§†é¢‘å¸§
MediaCapture é€šè¿‡ bindVideoSink() å°†å¸§å‘é€åˆ°è¿™ä¸ª sink
æ³¨æ„ï¼šGridView delegate æœ‰ä½œç”¨åŸŸéš”ç¦»ï¼Œéœ€è¦é€šè¿‡å±æ€§ä¼ é€’ mediaCapture
```

### 3. çº¿ç¨‹å®‰å…¨

```
LiveKit SDK çš„ Connect() æ˜¯é˜»å¡è°ƒç”¨
ä½¿ç”¨ QtConcurrent::run() åœ¨åå°çº¿ç¨‹æ‰§è¡Œ
é€šè¿‡ QMetaObject::invokeMethod() å›åˆ°ä¸»çº¿ç¨‹æ›´æ–° UI
```

---

## ğŸ“ å¼€å‘å¤‡å¿˜

- **è·³è¿‡ç™»å½•**ï¼š`main.qml` ä¸­ `initialItem: homePage` + é»˜è®¤ç”¨æˆ·å
- **è°ƒè¯•æ—¥å¿—**ï¼šå„ç±»å‡æœ‰ `qDebug()` è¾“å‡ºï¼Œé€šè¿‡å‰ç¼€åŒºåˆ†æ¥æº
- **æ¨¡æ‹Ÿæ•°æ®**ï¼š`ParticipantModel::addDemoParticipants()` æ·»åŠ æµ‹è¯•å‚ä¼šè€…
